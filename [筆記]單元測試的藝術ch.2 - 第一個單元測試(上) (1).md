# [ç­†è¨˜]å–®å…ƒæ¸¬è©¦çš„è—è¡“ch.2 - ç¬¬ä¸€å€‹å–®å…ƒæ¸¬è©¦

:::info 
:bulb: ä»¥å‰è£½ä½œçš„2-3å€‹side projectï¼Œéƒ½æ˜¯ä»¥Web Formçš„UIä»‹é¢é€²è¡Œæ¸¬è©¦ï¼Œç”šè‡³åå‘æ•´åˆæ¸¬è©¦ï¼Œå¸Œæœ›è‡ªå·±åœ¨ç¨‹å¼è¨­è¨ˆä¸Šèƒ½æ›´å®Œå–„ï¼Œæ‰€ä»¥è®€äº†ã€Šå–®å…ƒæ¸¬è©¦çš„è—è¡“ã€‹ç¬¬äºŒç‰ˆï¼Œä¸¦åšäº†ç­†è¨˜ã€‚
:::


## :+1: ç« ç¯€é‡é»

### :small_blue_diamond: æ¢è¨.Netçš„å–®å…ƒæ¸¬è©¦æ¡†æ¶
### :small_blue_diamond: ä½¿ç”¨NUnitæ’°å¯«ç¬¬ä¸€å€‹å–®å…ƒæ¸¬è©¦
### :small_blue_diamond: ä½¿ç”¨NUnitçš„ç‰¹æ€§
### :small_blue_diamond: äº†è§£ä¸€å€‹å·¥ä½œå–®å…ƒçš„ä¸‰ç¨®è¼¸å‡ºé¡å‹

## ğŸ–Šï¸  å–®å…ƒæ¸¬è©¦æ¡†æ¶

 (ä¸€) ä»‹ç´¹

1. é›–ç„¶VSå…§å»ºçš„æ˜¯MSTestï¼Œä½†æœ¬æ›¸ä½œè€…ä½¿ç”¨NUnitä½œç‚ºç¯„ä¾‹ï¼Œå› ç‚ºä»–èªç‚ºåœ¨æ’°å¯«å–®å…ƒæ¸¬è©¦æ–¹é¢ï¼ŒNUnitæ”¯æ´è¼ƒå¥½çš„åŠŸèƒ½ï¼Œä»¥åŠæä¾›**æ¸¬è©¦ç‰¹æ€§**å¹«åŠ©æ’°å¯«å¯ç¶­è­·æ€§ã€‚
2. å–®å…ƒæ¸¬è©¦æ¡†æ¶çš„å‘½åï¼Œé€šå¸¸æ˜¯ç”±ä»–å€‘æ‰€æ”¯æ´çš„ç¨‹å¼èªè¨€é–‹é ­å­—æ¯åŠ ä¸ŠUnitï¼Œå¦‚C++çš„CppUnitã€Javaçš„JUnitç­‰ã€‚
3. å–®å…ƒæ¸¬è©¦æ¡†æ¶ç¤ºæ„åœ–:
![448920248_1155039788873109_5042901094466490104_n](https://hackmd.io/_uploads/r1PUPgJwC.jpg)

4. å–®å…ƒæ¸¬è©¦æ¡†æ¶çš„å„ªé»: 
![448852893_1694571854644843_5553435279238478538_n](https://hackmd.io/_uploads/rJn8PxkDA.jpg)


## ğŸ–Šï¸  æœ¬æ›¸æ¸¬è©¦æ¡ˆä¾‹ä»‹ç´¹:LogAnå°ˆæ¡ˆ
1. LogAnå°ˆæ¡ˆçš„åŠŸèƒ½æ˜¯å°logæª”é€²è¡Œåˆ†æï¼Œä¸¦åœ¨å…¶ä¸­æœå°‹ç‰¹å®šçš„æƒ…æ³å’Œäº‹ä»¶ã€‚ç•¶æ‰¾åˆ°ç‰¹å®šæƒ…æ³æˆ–äº‹ä»¶å¾Œæœƒé€šçŸ¥ç›¸é—œäººå“¡ã€‚
2. æˆ‘å€‘è¦æ’°å¯«çš„æ¸¬è©¦å‰‡æ˜¯è¦é©—è­‰LogAnçš„è§£æã€äº‹ä»¶è¾¨è­˜ä»¥åŠé€šçŸ¥åŠŸèƒ½ã€‚

## ğŸ–Šï¸  NUnitæ“ä½œ

(ä¸€) å®‰è£
1. å¾VSçš„æ“´å……å¥—ä»¶ç®¡ç†å™¨(Extension Manager)ä¸­ä¸‹è¼‰NuGet Package Managerã€‚
2. å®‰è£å¾Œé‡å•ŸVSï¼Œä¸¦æ‰“é–‹é¸å–®Tools > Library Package Manager > Package Manager Consoleï¼Œåœ¨å½ˆå‡ºçš„å‘½ä»¤è¦–çª—ä¸­è¼¸å…¥Install-Package NUnitã€‚
3. ç¢ºèªæœ‰çœ‹åˆ°ã€Œå®‰è£æˆåŠŸã€ã€‚

(äºŒ) è¼‰å…¥æ–¹æ¡ˆçš„æ–¹å¼

1. æ‰¾åˆ°[Github](https://github.com/royosherove/aout2)è³‡æ–™å¤¾è£¡çš„ArtOfUnitTesting2ndEd.Samples.slnæª”æ¡ˆï¼Œé‚„æœ‰è³‡æ–™å¤¾LogAnå’ŒLogAn.UnitTestsã€‚æˆåŠŸä¸‹è¼‰çš„è©±ï¼Œå‰é¢åœ–ç¤ºæœƒè®Šæˆc#
![è¢å¹•æ“·å–ç•«é¢ 2024-07-01 003306](https://hackmd.io/_uploads/HJoZtZ1vR.png)


```
public class LogAnalyzer
{
    public bool IsValidLogFileName(string fileName)
    {
        if(fileName.EndsWith(".SLF")) //é€™è£¡åŸ‹äº†ä¸€å€‹bugï¼Œfilenameå‰é¢è¦åŠ "!"æ‰å°
        {
            return false;
        }
        return true;
    }
}
```
2. æ¸¬è©¦å‘½åèˆ‡ä½ç½®çš„åŸºæœ¬è¦å‰‡
![448791959_1310433413677275_3859685926772785856_n](https://hackmd.io/_uploads/BJ7O5gkv0.jpg)
æ¯”å¦‚ç”¨ä¾†æ¸¬è©¦LogAnçš„æ¸¬è©¦å°ˆæ¡ˆåç¨±ï¼Œä½œè€…å–åç‚ºLogAn.UnitTestsï¼Œæ¸¬è©¦LogAnalyzer Classçš„æ¸¬è©¦é¡åˆ¥åç¨±ç‚ºLogAnalyzerTestsã€‚å°IsValidFileNameæ–¹æ³•é€²è¡Œæ¸¬è©¦çš„åç¨±å‘½åç‚ºIsValidFileName_BadExtension_ReturnsFalse()ã€‚


(ä¸‰) åœ¨ç¨‹å¼ä¸­ä½¿ç”¨NUnitçš„ç‰¹æ€§

1. [TestFixture]æ¨™è¨˜åŒ…å«è‡ªå‹•åŒ–NUnitæ¸¬è©¦çš„Class
2. [Test]åŠ åœ¨methodçš„ä¸Šæ–¹
3. éœ€æ³¨æ„:NUnitè¦æ±‚æ¸¬è©¦Methodéœ€æ˜¯publicå’Œvoidï¼Œåœ¨åŸºæœ¬è¨­å®šæƒ…æ³ä¸‹ï¼Œä¸å…è¨±å‚³å…¥åƒæ•¸ã€‚
```
[TestFixture]
public class LogAnalyzerTests
{
    [Test]
    public void IsValidFileName_BadExtension_ReturnsFalse()
    {
    
    }
}
```


(å››) æ’°å¯«ç¬¬ä¸€å€‹æ¸¬è©¦ç¨‹å¼

ä¸€å€‹å–®å…ƒæ¸¬è©¦é€šå¸¸åŒ…å«
- æº–å‚™(Arrange)ç‰©ä»¶ã€å»ºç«‹ç‰©ä»¶ã€é€²è¡Œå¿…è¦è¨­å®š
- æ“ä½œ(Act)ç‰©ä»¶
- é©—è­‰(Assert)æŸä»¶äº‹ç¬¦åˆé æœŸ 

```
[Test]
public void IsValidFileName_BadExtension_ReturnsFalse()
{
    // Arrange
    LogAnalyzer analyzer = new LogAnalyzer();
    // Act
    bool result = analyzer.IsValidLogFileName("filewithbadextension.foo");
    // Assert
    Assert.False(result);
}
```

(äº”) åŸ·è¡Œç¬¬ä¸€å€‹æ¸¬è©¦
1. ä½¿ç”¨VS Test Runnerçš„ NUnit Test Adapterçš„NUnitåŸ·è¡Œå™¨æ“´å……å¥—ä»¶
2. ä½¿ç”¨Resharperæ¸¬è©¦åŸ·è¡Œå™¨
3. ä½¿ç”¨TestDriven.Netæ¸¬è©¦åŸ·è¡Œå™¨
4. ä½¿ç”¨ NUnitåœ–å½¢åŒ–ä»‹é¢




## ğŸ¤” ç–‘å•

#### 1.ä»€éº¼æ˜¯Assert?  
Ans: Assert(Class)æ˜¯å±¬æ–¼NUnit.Frameworkçš„å‘½åç©ºé–“è£¡æä¾›çš„éœæ…‹æ–¹æ³•ï¼Œæ˜¯ç¨‹å¼ç¢¼èˆ‡NUnitæ¸¬è©¦æ¡†æ¶é–“çš„æ©‹æ¢ï¼Œç”¨ä¾†ç¢ºèªè©²å‡è¨­ä¸‹æŸæœŸæœ›æ‡‰è©²æœƒæˆç«‹ã€‚Assertä¸‹çš„methodåŒ…å«:
- Assert.IsTrue
- Assert.IsFalse
- Assert.AreEqual(expectedObject,actualObject,message)ï¼Œå¦‚Assert.AreEqual(2,1+1,"Math is broken")
- Assert.AreSame(expectedObject,actualObject,message)ç”¨ä¾†é©—è­‰å…©å€‹åƒæ•¸æ˜¯å¦æŒ‡å‘åŒä¸€ç‰©ä»¶

#### 2.æ¸¬è©¦ç¨‹å¼æœ‰é¢¨æ ¼å—?  
Ans:æœ¬æ›¸ä½œè€…èªç‚ºæ¸¬è©¦ç¨‹å¼çš„ã€Œé¢¨æ ¼ã€å’Œã€Œå¯è®€æ€§ã€å’Œä¸€èˆ¬ç¨‹å¼ç¢¼ä¸å®Œå…¨ä¸€è‡´ï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹é»:
- æ¸¬è©¦åç¨±å¯ä»¥å¾ˆé•·ï¼Œé¿å…éºæ¼é‡è¦è³‡è¨Š
- **å¯è®€æ€§**æ˜¯æœ€é‡è¦çš„è€ƒé‡ï¼Œåœ¨æº–å‚™ç‰©ä»¶ã€æ“ä½œç‰©ä»¶ä»¥åŠé©—è­‰éšæ®µçš„ç¨‹å¼ç¢¼é–“è¦ç•™ç©ºç™½è¡Œ
- ç›¡é‡æŠŠé©—è­‰å’Œæ“ä½œç‰©ä»¶çš„ç¨‹å¼ç¢¼åˆ†é–‹

#### 3.å¦‚ä½•è¨­è¨ˆæ¸¬è³‡?
é‚„æœªæ‰¾åˆ°è§£ç­”

## ğŸ“– (ä¸‹)ç¯‡ä¸»é¡Œé å‘Š
        
åœ¨äº†è§£ç¬¬ä¸€æ¬¡æ“ä½œæ¸¬è©¦å¾Œï¼Œç”±æ–¼å‰é¢èˆ‰ä¾‹çš„æ¸¬è©¦ç¨‹å¼ä¸å®¹æ˜“ç¶­è­·ï¼Œæ‰€ä»¥(ä¸‹)ç¯‡å°‡é‡æ§‹ç¨‹å¼ç¢¼ã€‚