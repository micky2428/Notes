---
title: '[ç­†è¨˜]ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆch.7_ç¹¼æ‰¿çš„åŸºæœ¬æ¦‚å¿µ&å–®ç¹¼æ‰¿'

---

 # [ç­†è¨˜]ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆch.6
:::info 
:bulb: æœ¬ç­†è¨˜å…§å®¹æºè‡ªæº«å®æ–Œè€å¸«çš„ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆOCWã€‚
:::

## :+1: ç« ç¯€é‡é»

### :small_blue_diamond: ç¹¼æ‰¿çš„åŸºæœ¬æ¦‚å¿µ&å–®ç¹¼æ‰¿


## ğŸ–Šï¸ ç¹¼æ‰¿
(ä¸€)æ¦‚å¿µ
1.ç¹¼æ‰¿åœ¨æ¦‚å¿µä¸Šæ˜¯is-aé—œä¿‚ï¼Œåœ¨ç¾æœ‰çš„é¡(class)ä¹‹é–“å»ºç«‹çˆ¶å­é—œä¿‚ã€‚

2.ç¹¼æ‰¿çš„å±¬æ€§åŒ…å«data member(è³‡æ–™)å’Œmember function(æ–¹æ³•)ï¼Œä¸éæ–°é¡åˆ¥
(1)å¯ä»¥è‡ªå·±å‰µé€ æ–°çš„å±¬æ€§å’Œæ–¹æ³•
(2)èƒ½é‡æ–°å®šç¾©åŸºç¤é¡åˆ¥è£¡çš„ä¸€äº›å‡½å¼
(3)åœ¨è¡ç”Ÿé¡åˆ¥ä¸­æ”¹è®Šæˆå“¡çš„å±¬æ€§(æ¯”å¦‚å¾publicè®Šæˆprivate)ã€‚


3.å»ºç«‹éšå±¤åŒ–çš„é¡åˆ¥æ¶æ§‹(ç”±é€šæ³›èµ°å‘å°ˆå±¬çš„)ã€‚
![è¢å¹•æ“·å–ç•«é¢ 2024-10-12 105404](https://hackmd.io/_uploads/SkbyrDwkyl.png)

4.ä¸Šå±¤ç¨±åŸºç¤é¡åˆ¥ï¼Œä¸‹å±¤ç¨±è¡ç”Ÿé¡åˆ¥ï¼Œç”±ä¸Šåœ–å¯çŸ¥:
(1)**åŸºç¤é¡åˆ¥**ï¼Œå¯ä»¥æœ‰å¾ˆå¤šå€‹è¡ç”Ÿé¡åˆ¥
(2)**è¡ç”Ÿé¡åˆ¥**ï¼Œå¯ä»¥ç¹¼æ‰¿å¾ˆå¤šçš„åŸºç¤é¡åˆ¥(å¤§æ–¼2å€‹->**å¤šé‡ç¹¼æ‰¿**)

5.ç¹¼æ‰¿çš„ä½œç”¨:**ç¨‹å¼ç¢¼çš„é‡è¤‡ä½¿ç”¨**(oopçš„é‡è¦è§€å¿µ)ã€‚

6.æœ‰**ä¸‰ç¨®æƒ…æ³æ˜¯ä¸èƒ½è¢«ç¹¼æ‰¿**çš„:â­
(1)åŸºç¤é¡åˆ¥çš„å»ºæ§‹å’Œè§£æ§‹å­
(2)åŸºç¤é¡åˆ¥çš„friend
(3)static dataå’Œæˆå“¡å‡½å¼å› ç‚ºæ˜¯å°ˆå±¬ä¸€é¡åˆ¥çš„ï¼Œæ‰€ä»¥ä¹Ÿä¸èƒ½è¢«ç¹¼æ‰¿

â€»è£œå……:é‡è¼‰æŒ‡æ´¾é‹ç®—å­(overloaing assignment operator)&æ‹·è²å»ºæ§‹å¼(Copy Constructor)é›–ä¸èƒ½ç¹¼æ‰¿ï¼Œä½†å¯ä»¥åœ¨è¡ç”Ÿé¡åˆ¥ä¸­ä½¿ç”¨ã€‚
ä»¥ "=" èˆ‰ä¾‹:
```
//å‘¼å«CBaseä¸­çš„operatorå‡½å¼ï¼Œä¸¦æŠŠrHandä¸Ÿé€²å»ï¼ŒæŠŠrHandå…ˆé™ç´šè½‰å‹æˆCBaseçš„ç‰©ä»¶ï¼Œä¸Ÿåˆ°åŸºç¤é¡åˆ¥çš„functionå’Œè£¡é¢çš„æ¬„ä½ä½œç”¨ã€‚
CDerived& CDerived::operator = (
            const CDerived& rHand){
            CBase ::operator=(rhand);
}
```


(äºŒ)ç¯„ä¾‹
1.	åŸºç¤é¡åˆ¥æœƒå®šç¾©æœ‰å“ªäº›å±¬æ€§æ˜¯å¯ä»¥æä¾›è¡ç”Ÿé¡åˆ¥ç¹¼æ‰¿çš„ï¼Œç¨±ç‚ºå¯ç¹¼æ‰¿çš„ç‰¹è³ªï¼ŒåŒ…å«publicå’Œprotectedã€‚privateæ˜¯ä¸å¯ç¹¼æ‰¿çš„ç‰¹æ€§ã€‚
```
//åŸºç¤é¡åˆ¥
class CCircle{
protected:
    double radius;
public:
    CCircle(double r =1.0):radius(r){;}
    void setR(double r =1.0){radius=r;}
    double calVol() **const** {
        return (PI*radious*radious);
    }
    void showVol() **const**{
    cout << "radius=" <<radius <<endl;
    cout << "volumn=" <<calVol() <<endl;
    }
};
```
â€»è£œå……:ä¸Šé¢çš„ç¨‹å¼ç¢¼æœ‰å…©å€‹å‡½å¼æœ‰åŠ constã€‚
â­**å¦‚æœå‡½å¼åªæ˜¯ä¸€èˆ¬å­˜å–å™¨**ï¼ˆaccessorï¼Œä½œç”¨åƒ…åƒ…æ˜¯ç”¨ä¾†è®€å–ï¼Œä¸æœƒæ”¹å€¼ï¼‰çš„è©±ï¼Œ**åŸºæœ¬ä¸Šåœ¨ä¸æ”¹è®Šç§æœ‰å±¬æ€§çš„æƒ…æ³éƒ½æœƒå®£å‘Šæˆconst function**ï¼Œä»¥å…ä»¥å¾Œé‡åˆ°const objectè¦å‘¼å«é€™äº›functionæ™‚ç„¡æ³•å‘¼å«ï¼Œè¨˜å¾—é¤Šæˆå¥½ç¿’æ…£!

â­Costant methodå¯ä»¥è¢«constå‘¼å«ä¹Ÿå¯ä»¥è¢«éconstå‘¼å«ï¼Œä½†å¦‚æœä¸åŠ çš„è©±ï¼Œåªæœ‰regularçš„å¯ä»¥å‘¼å«ä»–ã€‚


3.class<ç¹¼æ‰¿é¡åˆ¥åç¨±>çš„å†’è™Ÿå¾Œé¢æ˜¯<ç¹¼æ‰¿æ–¹å¼> <åŸºç¤é¡åˆ¥x>
```
//è¡ç”Ÿé¡åˆ¥
class CCylinder:public CCircle{
protected:
    double length; //CCylinderè‡ªå·±æ–°å¢çš„è³‡æ–™
public:
    //å®šç¾©äº†è‡ªå·±çš„constructorï¼Œå‘¼å«CCircle(r)ä¸¦æŠŠrè¨­å®šåœ¨radiusè£¡é¢
    CCylinder(double r =1.0, double l =1.0):CCircler(r),length(l){;}
    void setRL(double r =1.0, double l =1.0){radius=r; length=l;}
    //é€™æ¨£å°±ä¸ç”¨é‡å¯«åœ“é¢ç©çš„è¨ˆç®—å…¬å¼
    double calVol() const {
        return (**CCircle::calVol()***length);
    }
    //å¾CCirvleç¹¼æ‰¿showVol()
    void displayVol() const{
    cout << "d radius=" <<radius <<endl;
    cout << "d volumn=" <<calVol() <<endl;
    
}
//main program
int main(){
    //åœ“
    CCircle cr1,cr2(4);
    //åœ“æŸ±
    CCylinder cy1,cy2(2,3);
    
    cr1.setR(2);
    cr1.showVol();cr2.showVol();
    //(3,1)
    cy1.setRL(3);
    //æ²’æœ‰ä¹˜ä¸Šé•·åº¦;æœ‰ä¹˜ä¸Šé•·åº¦
    cy1.showVol();cy1.displayVol();
    cy2.showVol();cy2.displayVol();
    //â€å¼·åˆ¶è½‰å‹â€ï¼ŒæŠŠåœ“æŸ±è½‰æˆåœ“
    cr1=cy1;
    //ç§€å‡ºåœ“çš„é¢ç©
    cr1.showVol();
    
    return 0;
}
```

(ä¸‰)ç¹¼æ‰¿çš„æ–¹å¼
ä¸åŒçš„ç¹¼æ‰¿æ–¹å¼æœƒå½±éŸ¿è¡ç”Ÿé¡åˆ¥å¦‚ä½•å­˜å–åŸºç¤é¡åˆ¥çš„æˆå“¡ï¼Œæ­¤æ™‚å°±æ¶‰åŠäº†**å­˜å–ä¿®é£¾ç¬¦**çš„è¨­å®šã€‚

1.public
(1)ç”¨å…¬é–‹ç¹¼æ‰¿å¯ä»¥ç¶­æŒåŸºç¤é¡åˆ¥çš„å¯ç¹¼æ‰¿æ€§ï¼Œå¦‚ä¸‹è¡¨:

| åœ¨å…¬é–‹åŸºç¤é¡åˆ¥çš„æˆå“¡å±¬æ€§ | åœ¨å…¬é–‹è¡ç”Ÿé¡åˆ¥çš„å­˜å–æ€§ |
| -------- | -------- |
| public     | public  |
| private     | private  |
| protected     | protected  |


(2)è¡ç”Ÿé¡åˆ¥çš„member functionå¯ä»¥ç›´æ¥å­˜å–åŸºç¤é¡åˆ¥ä¸­publicå’Œprotectedçš„memberã€‚**åŸºç¤é¡åˆ¥ä¸­Private member**é›–æœ‰ç¹¼æ‰¿ï¼Œä½†ä¸åƒè‡ªå·±é¡åˆ¥å…§çš„memberå¯ä»¥ä»»æ„å­˜å–ï¼Œè¦**é€éåŸºç¤é¡åˆ¥ä¸­å®šç¾©çš„****accessor**ã€‚
```
//åŸºç¤é¡åˆ¥
class CPoint
{
    double x,y;
public:
    CPoint(double a =0, double b=0):
        x(a), y(b){}
    //mutator:æ”¹è®Šå…§å®¹
    void SetPoint(double a =0, double b=0){
        x=a, y=b;
    }
    void MovePoint(double dx, double dy){
        x+=dx, y+=dy;
    }
    //accessor 
    double GetX() const{return x;}
    double GetY() const{return y;}

}

//è¡ç”Ÿé¡åˆ¥
class CRect: public CPoint
{
    double h,w; //æ–°å¢ç§æœ‰è³‡æ–™
public:
    double GetH() const {return h;}
    double GetW() const {return w;}
    CRect(double a, double b,double c,double d): h(c),w(d){**SetPoint(a,b)**;}

    //mutator:æ”¹è®Šå…§å®¹
    void SetRect(double a, double b,double c,double d){
        **SetPoint(a,b)**;
        h=c; w=d;
    }
}

//main()
int main(){
    CRect cr1;
    cr1.SetRect(2,3,10,20);
    cr1.MovePoint(3,2);
    ......
}
```


(3)è¡ç”Ÿé¡åˆ¥ç”¢ç”Ÿçš„**ç‰©ä»¶**(å¦‚å‰ä¾‹CCircle)åªèƒ½ç”¨åŸºç¤é¡åˆ¥çš„public memberã€‚

â˜…â˜…é€™æ™‚å€åˆ†å‡ºpublicå’Œprotectedçš„å·®åˆ¥ã€‚publicå’Œprotectedåœ¨é¡çš„è¦–é‡ä¸­æ²’æœ‰å·®ç•°ï¼Œæ‰€ä»¥member functionéƒ½å¯ä»¥å‘¼å«ã€‚**ä½†åœ¨ç‰©ä»¶å±¤ç´šåªèƒ½å‘¼å«public**ã€‚



2.private
(1)ç‚ºäº†ç¶­è­·å°è£å®Œæ•´æ€§ï¼Œåªè¦æ˜¯ç§æœ‰é¡åˆ¥ä¸è«–ç¹¼æ‰¿æ–¹å¼ï¼Œéƒ½**ä¸èƒ½å­˜å–**ï¼Œä½†**ä»æœ‰ç¹¼æ‰¿åˆ°é€™äº›è³‡æ–™**(æœ‰å è¨˜æ†¶é«”ç©ºé–“)ã€‚

| åœ¨ç§æœ‰åŸºç¤é¡åˆ¥çš„æˆå“¡å±¬æ€§ | åœ¨ç§æœ‰è¡ç”Ÿé¡åˆ¥çš„å­˜å–æ€§ |
| -------- | -------- |
| public     | private  |
| private     | inaccessible  |
| protected     | private  |

(2)è¡ç”Ÿé¡åˆ¥çš„ç‰©ä»¶å°±ä¸èƒ½å‘¼å«ã„ä»»ä½•memberã€‚è¡ç”Ÿé¡åˆ¥çš„ç‰©ä»¶åªèƒ½å‘¼å«è‡ªå·±å¯«åœ¨publicçš„é‚£äº›memberã€‚

(3)ç¯„ä¾‹
```
//åŸºç¤é¡åˆ¥
class CPoint
{
   (åŒä¸Š)
}
//è¡ç”Ÿé¡åˆ¥
class CRect: private CPoint
{
    double h,w; //æ–°å¢ç§æœ‰è³‡æ–™
public:
    double GetH() const {return h;}
    double GetW() const {return w;}
    //mutator
    void SetRect(double a, double b,double c,double d){
        //é€éç¹¼æ‰¿çš„å‡½å¼ä¾†è¨­å®šè³‡æ–™
        CPoint::**SetPoint(a,b)**;
        h=c; w=d;
    }
    //ä¸åŒæ–¼å‰ä¾‹å…¬é–‹ç¹¼æ‰¿çš„è¡ç”Ÿé¡åˆ¥ï¼Œé€™è¡Œæ˜¯è‡ªå·±å¯«çš„
    void MoveRect(double dx, double dy){
        CPoint::**MovePoint(dx,dy)**;
    }
};
//main()
int main(){
    CRect cr2;
    cr2.SetRect(2,3,20,10);
    cr2.MovePoint(3,2); //éŒ¯èª¤
    //åªèƒ½ç”¨è‡ªå·±å¯«çš„
    cr2.MoveRect(3,2);
    ......
}

```

3.protected
1.å’Œprivateä¸€æ¨£ï¼Œè¡ç”Ÿé¡åˆ¥çš„**ç‰©ä»¶**å°±ä¸èƒ½å‘¼å«ä»»ä½•memberã€‚å°ç‰©ä»¶ä¾†èªªï¼Œæ•ˆæœåŒç§æœ‰ã€‚

2.å°æ–¼åœ¨åŸºç¤é¡åˆ¥ä¸­çš„protectedæˆå“¡ï¼Œåœ¨åŸºç¤é¡åˆ¥ä»¥å¤–ï¼Œæ•ˆæœåŒç§æœ‰ã€‚

3.å°æ–¼ç¹¼æ‰¿protectedçš„è¡ç”Ÿé¡åˆ¥ï¼Œprotectedæˆå“¡ï¼Œæ•ˆæœåŒå…¬é–‹ã€‚


| åœ¨ç§æœ‰åŸºç¤é¡åˆ¥çš„æˆå“¡å±¬æ€§ | åœ¨ç§æœ‰è¡ç”Ÿé¡åˆ¥çš„å­˜å–æ€§ |
| -------- | -------- |
| public     | protected  |
| private     | inaccessible  |
| protected     | protected  |




## ğŸ¤” ç–‘å•
Q1: å®£å‘Šæˆ const å‡½å¼çš„é‡è¦æ€§?
A1:
1.é˜²æ­¢ç„¡æ„ä¿®æ”¹åˆ°å±¬æ€§ï¼šç•¶å‡½å¼è²æ˜ç‚º constï¼Œç·¨è­¯å™¨æœƒä¿è­‰è©²å‡½å¼ä¸æœƒä¿®æ”¹é¡çš„ä»»ä½•å±¬æ€§ï¼Œé€™æ˜¯ä¸€ç¨®é¡å¤–çš„å®‰å…¨æ€§ã€‚
(2.æŒ const å°è±¡èª¿ç”¨ï¼šè‹¥æŸå€‹å‡½å¼ä¸ä¿®æ”¹é¡çš„æˆå“¡è®Šæ•¸ï¼Œæœ€å¥½å°‡å®ƒè²æ˜ç‚º constï¼Œé€™æ¨£åœ¨ const å°è±¡èª¿ç”¨é€™äº›å‡½å¼æ™‚ä¸æœƒç™¼ç”Ÿç·¨è­¯éŒ¯èª¤ã€‚
```
class MyClass {
private:
    int value;

public:
    // ä¸€èˆ¬ accessor å‡½å¼
    int getValue() const {
        return value;
    }
    
    // é const å‡½å¼
    void setValue(int val) {
        value = val;
    }
};

const MyClass obj;
obj.getValue();  // å¯ä»¥èª¿ç”¨ï¼Œå› ç‚º getValue() æ˜¯ const å‡½å¼
obj.setValue(10);  // éŒ¯èª¤ï¼Œå› ç‚º setValue() ä¸æ˜¯ const å‡½å¼
```

Q2: ä»€éº¼æ˜¯æ‹·è²å»ºæ§‹å¼(Copy Constructor)?
A2:
1.å®šç¾©:æ‹·è²å»ºæ§‹å¼ï¼ˆCopy Constructorï¼‰ç”¨æ–¼å‰µå»ºä¸€å€‹å°è±¡ä½œç‚ºå¦ä¸€å€‹åŒé¡å‹å°è±¡çš„å‰¯æœ¬ã€‚

2.ä½•æ™‚æœƒä½¿ç”¨æ‹·è²å»ºæ§‹å¼ï¼Ÿ
- å°è±¡åˆå§‹åŒ–æ™‚
```
ClassName obj1;
ClassName obj2 = obj1; 
```
- å°‡å°è±¡ä½œç‚ºåƒæ•¸å‚³éçµ¦å‡½æ•¸æ™‚
`void function(ClassName obj);`
- å¾å‡½æ•¸è¿”å›å°è±¡æ™‚
```
ClassName function() {
    ClassName obj;
    return obj;  // èª¿ç”¨æ‹·è²å»ºæ§‹å¼
}
```
3.æ‹·è²å»ºæ§‹å¼çš„ä½œç”¨ï¼š
ç¢ºä¿åœ¨å‰µå»ºæ–°å°è±¡æ™‚æ­£ç¢ºåœ°è¤‡è£½å·²å­˜åœ¨å°è±¡çš„æ•¸æ“šã€‚å¦‚æœé¡ä¸­æœ‰**å‹•æ…‹åˆ†é…**çš„è³‡æºï¼Œéœ€è¦**è‡ªå®šç¾©æ‹·è²**å»ºæ§‹å¼ä¾†é¿å…æ·ºæ‹·è²å•é¡Œï¼Œå°è‡´è³‡æºè¡çªæˆ–éŒ¯èª¤ã€‚

4.é è¨­æ‹·è²å»ºæ§‹å¼ï¼š
å¦‚æœé¡ä¸­æ²’æœ‰è‡ªå®šç¾©çš„æ‹·è²å»ºæ§‹å¼ï¼ŒC++ æœƒç”Ÿæˆä¸€å€‹é è¨­æ‹·è²å»ºæ§‹å¼ï¼Œè©²å»ºæ§‹å¼åŸ·è¡Œæ·ºæ‹·è²ï¼Œåƒ…æ‹·è²æ¯å€‹æˆå“¡çš„å€¼ï¼Œå°æ–¼æŒ‡é‡æˆå“¡å‰‡åªæ‹·è²æŒ‡å‘çš„åœ°å€ã€‚é€™åœ¨æœ‰å‹•æ…‹å…§å­˜çš„æƒ…æ³ä¸‹å¯èƒ½æœƒå°è‡´å•é¡Œï¼Œå› æ­¤éœ€è¦è‡ªå®šç¾©æ‹·è²å»ºæ§‹å¼ä¾†é€²è¡Œæ·±æ‹·è²ã€‚

## ğŸ“– ä¸‹ä¸€ç« ç¯€ä¸»é¡Œé å‘Š
å¤šé‡ç¹¼æ‰¿


