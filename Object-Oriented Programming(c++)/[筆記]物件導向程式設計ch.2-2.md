---
title: '[ç­†è¨˜]ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆch.2-2'
tags: [ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ]

---

# [ç­†è¨˜]ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆch.2-2
:::info 
:bulb: æœ¬ç­†è¨˜å…§å®¹æºè‡ªæº«å®æ–Œè€å¸«çš„ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆOCWã€‚
:::

## :+1: ç« ç¯€é‡é»

### :small_blue_diamond: æŒ‡æ¨™(*) 
### :small_blue_diamond: åƒè€ƒ(&)
### :small_blue_diamond: Constçš„è¨è«–
### :small_blue_diamond: å‹•æ…‹è¨˜æ†¶é«”åˆ†é…
### ğŸ”– æœ¬ç« é‡é»æ¯”è¼ƒè¡¨æ ¼:

|  | * | & |
| -------- | -------- | -------- |
| å®£å‘Š | æŒ‡æ¨™| åˆ¥åå‘¼å« |
| ä½¿ç”¨ | è§£åƒè€ƒ| å–å‡ºä½å€(Address of Operator) |


## ğŸ–Šï¸ æŒ‡æ¨™(Pointer)

(ä¸€)åŸºæœ¬å®šç¾©
æŒ‡æ¨™æ˜¯ç¨‹å¼çš„é‡è¦æ¦‚å¿µï¼ŒæŒ‡æ¶‰çš„å¯ä»¥æ˜¯**è®Šæ•¸**ã€**æŒ‡æ¨™**å’Œ**å‡½æ•¸çš„ä½å€**ã€‚
1.æŒ‡æ¶‰è®Šæ•¸ä½å€çš„ä¾‹å­
- ç›´æ¥
```
int *ptr1
//ä»»æ„è³‡æ–™å‹æ…‹(å…ˆä¸å®šç¾©å…§å®¹)çš„è®Šæ•¸
void *ptr2
//å¦‚ch.2-1è‡ªå®šç¾©çš„è®Šæ•¸
AirTicket *ptr3  
```
- é–“æ¥:è§£åƒè€ƒ(Dereferencing)ï¼Œ**çµåˆ**å–å‡ºä½å€ç¬¦è™Ÿ(&)ä½¿ç”¨
```
float x = 2;
//æŒ‡æ¨™ptä¸­å­˜æ”¾ä¸€å€‹floatè®Šæ•¸çš„ä½å€
float *pt;
//&æœƒæŠŠxçš„è¨˜æ†¶é«”ä½ç½®æŠ“å‡ºä¾†ï¼Œå†assignåˆ°å·¦é‚Šçš„ptå»ï¼Œæ­¤æ™‚xçš„è¨˜æ†¶é«”ä½ç½®å°±æœƒå¯«å…¥ptè£¡é¢
pt = &x;
```

2.æŒ‡æ¶‰æŒ‡æ¨™ä½å€çš„ä¾‹å­ï¼Œå¦‚ä¸‹ä¾‹çš„è®Šæ•¸c
```
float a = 1, *b, **c;
b = &a
c = &b
```

3.æŒ‡æ¶‰å‡½æ•¸ä½å€çš„ä¾‹å­
ç”±æ–¼æ¯å€‹function blockåœ¨code sectionéƒ½æœ‰è‡ªå·±è¨˜æ†¶é«”ä½ç½®ï¼Œå°±å¯ä»¥æ‰¾æŒ‡æ¨™æŒ‡å‘é€™å€‹ä½ç½®
```
int fc1 (char x, char y);
//function pointer
int (*fp) (char a, int b);
fp = fc1;
fp = fc1("x",5); //éŒ¯èª¤ï¼Œå› ç‚ºfc1æ‡‰è©²è¦è¿”å›intï¼Œè€Œéfunction pointer
```
:bulb:æ³¨æ„:function pointeræœƒåŠ ä¸Š()ï¼Œé¿å…èª¤æœƒæˆå›å‚³æ˜¯pointer!

4.æŒ‡æ¶‰arrayä¸­å…ƒç´ ä½å€çš„ä¾‹å­
æ¯”indexå¿«

|  | array indexing | pointer notation |
| -------- | -------- | -------- |
|  ç¬¬0ä½    | array[0]     | *array   |
|  ç¬¬1ä½   | array[1]     | *(array+1)    |


â€»è£œå……:ä»€éº¼æ˜¯code section?
è¨˜æ†¶é«”ä¸­å„²å­˜å¯åŸ·è¡Œç¨‹å¼ç¢¼çš„å€åŸŸã€‚
ä¸‹åœ–æ˜¯ä¸€å¼µèªªæ˜multithreadedçš„åœ–ï¼Œåœ¨å¤šç·šé‹è¡Œæ™‚ï¼Œæœ€ä¸Šæ’çš„code section data sectionå’Œosè³‡æº(å¦‚æª”æ¡ˆ)æ˜¯å…±äº«çš„ã€‚
![è¢å¹•æ“·å–ç•«é¢ 2024-10-06 161612](https://hackmd.io/_uploads/rJDvDTkJ1g.png)

åœ–ç‰‡ä¾†æº:å‘¨å¿—é æ•™æˆä½œæ¥­ç³»çµ± Chap3 Processes Conceptè¬›ç¾©

(äºŒ)ç‚ºä»€éº¼è¦ä½¿ç”¨æŒ‡æ¨™
1.å¯ä»¥é€²è¡Œå‹•æ…‹åˆ†é…ï¼Œé¿å…æµªè²»ç©ºé–“ã€‚
2.é€éæŒ‡æ¨™åŒ–ç›´æ¥ä¿®æ”¹å¯¦éš›åƒæ•¸(å¦‚æœåªæ˜¯åšcall by valueï¼Œæ”¹ä¸åˆ°åŸä¾†çš„åƒæ•¸ã€‚)

â€» è£œå……:C++ çš„æ±‚å€¼ç­–ç•¥(Evaluation strategy)-Call by Value, Call by Reference

|  | call by value | call by reference |
| -------- | -------- | -------- |
| å…§å®¹ | åƒæ•¸å¼•ç”¨çš„æ–¹å¼ï¼Œå–®ç´”æ˜¯å€‹æ•¸å€¼ï¼Œè·ŸåŸæœ¬çš„è®Šæ•¸æ¯«ç„¡é—œè¯| å¼•ç”¨è®Šæ•¸è€Œéæ•¸å€¼ |
| ä¾‹å­ | void add(int <font color="#AC19C9">a</font>, int <font color="#AC19C9">b</font>) | void add(int <font color="#AC19C9">*a</font>, int <font color="#AC19C9">*b</font>) 
 

èˆ‰ä¾‹è€Œè¨€ï¼Œç”±æ–¼call by referenceæ˜¯ç›´æ¥å¼•ç”¨è®Šæ•¸ï¼Œæ‰€ä»¥å‘¼å«å‡½å¼ä»¥å¾Œï¼ŒåŸæœ¬è®Šæ•¸çš„å€¼å°±æœƒæ”¹è®Šï¼Œå¦‚ä¸‹ä¾‹è®Šæ•¸aæ‰€æŒ‡æ¶‰åˆ°çš„ä½ç½®ä¸­çš„å€¼ç”±6æ”¹ç‚º12ã€‚
```
void add(int *a, int *b) {
    *a = *a + *b;
}

int main() {
    int a = 6;
    int b = 6;
    add(&a, &b);        
    print("a = %d", a); // é€™é‚Šå°å‡ºçš„æ˜¯ a = 12
    return 0;
}
```


## ğŸ–Šï¸  åƒè€ƒ(References)
(ä¸€)å®šç¾©
åƒè€ƒè¢«ç¨±ç‚ºæ·ºå‹çš„pointerï¼Œå®ƒå¯ä»¥è‡ªå‹•è§£åƒè€ƒ(ä¸éœ€è¦*)ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è‡ªå‹•å–å‡ºè¢«æŒ‡åˆ°çš„å€¼ã€‚
ä¸‰ç¨®ä½¿ç”¨æ–¹å¼:
1.è¢«è¦–ç‚ºç¨ç«‹è®Šæ•¸
:bulb:å› ç‚ºæ˜¯å¹«åˆ¥äººå–åˆ¥åï¼Œåƒè€ƒå°è±¡å’Œåˆ¥åè®Šæ•¸çš„è³‡æ–™å½¢æ…‹è¦ä¸€è‡´ï¼Œåœ¨åˆå§‹åŒ–å°±è¦å®£å‘Šå¥½!
```
double num = 0.07
double &refnum = num
```


2.ä½œç‚ºåƒæ•¸å‚³éçµ¦å‡½æ•¸

ä»¥å‰é¢æécall by referenceä¾‹å­ä¾†èªªï¼Œèªæ³•æ›´ç›´è§€ï¼Œ**ä¸éœ€è¦æ“ä½œè¨˜æ†¶é«”ä½å€**ã€‚
```
//add.cpp
void add(int &a, int &b) {
    a = a + b;  
}
//main() in main.cpp
int main() {
    int a = 6;
    int b = 6;
    add(a, b);  
    cout << "a = " << a << endl;  // a = 12
    return 0;
}
```

3.ç”±å‡½å¼è¿”å›ä½œç‚ºçµæœ
```
//å›å‚³çš„å’Œå‚³å…¥çš„æ±è¥¿ç”¨çš„æ˜¯åŒä¸€å¡Šè¨˜æ†¶é«”
int& fun(int *a, int i){
    //return a[i]é€™å€‹è®Šæ•¸(è€Œéè©²è®Šæ•¸çš„å€¼) 
    if (i>0 && i<5) return a[i];
    else exit(0);
}

//iary:æ•´æ•¸array
for (int idx=0; idx<5; idx++)
    //å‡è¨­æ”¶åˆ°a[3] æœƒåŸ·è¡Œ a[3] = 3*2
    fun(iary,idx) = idx*2
```
:bulb:å¦‚æœæ˜¯int fun(int * a, int i)ï¼Œå°±æœƒéŒ¯èª¤ï¼Œå› ç‚ºreturnçš„æ˜¯int(a[i]çš„å€¼)ï¼Œéa[i]ã€‚



## ğŸ–Šï¸  Constçš„è¨è«–
é¿å…å‡½å¼ç„¡é è­¦åœ°æ”¹æ‰å…§å®¹å€¼ï¼Œæœ‰æ™‚æˆ‘å€‘æœƒä½¿ç”¨constantï¼Œå¯åˆ†ç‚ºå››ç¨®é¡å‹:
1. a reference to constant
```
int x = 5;
const int& xref = x;
x = 33;         //åŸè®Šæ•¸å¯ä»¥æ”¹è®Š
cout << xref;  //33
xref = 15;     //å‰é¢å·²å®£å‘Šåˆ¥åè®Šæ•¸åªèƒ½è®€ä¸èƒ½æ”¹
```
3. a pointer to constant
```
int x = 5, y = 6;
const int *pt = &x;
cout << *pt;  //5
pt =&y;
cout << *pt;  //7
*pt = 11;    //éŒ¯èª¤ï¼Œptå­˜å–çš„è¨˜æ†¶é«”ä½æŒ‡å¯è®Šï¼Œä½†ä½æŒ‡è§£åƒè€ƒçš„å…§å®¹ä¸å¯è®Šã€‚
```
4. a constant pointer
å¸¸æ•¸æŒ‡æ¨™ï¼Œè¡¨ç¤ºå®£å‘Šä»¥å¾ŒæŒ‡æ¨™çš„è¨˜æ†¶é«”ä½å€æœƒè¢«èªç‚ºæ˜¯å¸¸æ•¸ï¼Œæ‰€ä»¥ä¸èƒ½åƒå‰é¢æ›´æ”¹å­˜å–çš„è¨˜æ†¶é«”ä½å€ã€‚CptæŒ‡åˆ°çš„å…§å®¹å¯
const æ˜¯ç”¨ä¾†ä¿®é£¾cptçš„ï¼Œåªèƒ½æ°¸é çœ‹&var1çš„ä½å€
```
int var1 = 3, var2 = 5;
int * const cpt = &var1;
*cpt = 8; //8
cpt = &var2//éŒ¯èª¤ï¼Œ
```
6. a constant pointer to a constant(æœ€åš´æ ¼)
```
const int v1 = 11, v2 = 22;
const int *cptc = &v1;
*cptc = 33     //éŒ¯èª¤
cout << *cptc; //11
cptc = & v2;
cout << *cptc; //22
```

## ğŸ–Šï¸  å‹•æ…‹è¨˜æ†¶é«”åˆ†é…
(ä¸€)åŸºæœ¬æ“ä½œ
ä¸åŒæ–¼Cå¸¸ç”¨malloc()å’Œfree()ä¾†æ“ä½œå‹•æ…‹è¨˜æ†¶é«”åˆ†é…ï¼ŒC++ä½¿ç”¨newå’Œdeleteï¼Œç¯„ä¾‹å¦‚ä¸‹:
```
//å®£å‘Šä¸€å€‹æŒ‡æ¨™dptï¼Œä¸¦ç”¨newåˆ†é…ç©ºé–“çµ¦ä»–
double *dpt = new double(0,0);
if (dpt == NULL)
{
    cout << "insuffcient memory.\n";
    exit(1);
}
*dpt = 3.4;
//å°‡ç©ºé–“é‚„çµ¦heap
delete dpt;
```
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé‡å°compileå‰å·²ç¶“å®£å‘Šçš„è®Šæ•¸ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨stackè¨˜æ†¶é«”çš„è®Šæ•¸ï¼Œå¦‚æœåªå–®ç´”delete pä¸æœƒçœŸæ­£æ¶ˆæ»…stackè£¡çš„pï¼Œè€Œæ˜¯æ­¸é‚„*pæŒ‡åˆ°çš„ä½å€ã€‚
```
int *p = new int(5);
delete pl
```
å‹•æ…‹åˆ†é…è¨˜æ†¶é«”æ™‚ï¼Œè¦æ³¨æ„æœ‰ç„¡æ­¸é‚„ç©ºé–“ï¼Œé¿å…æµªè²»è¨˜æ†¶é«”ã€‚

(äºŒ)å¦‚ä½•å‰µç«‹å‹•æ…‹Array
åœ¨è³‡æ–™çµæ§‹èª²ç¨‹ä¸­ï¼Œä¸€èˆ¬çš„Arrayæ˜¯a set of index and valueï¼Œä¸”å¤§å°æ˜¯ä¸€é–‹å§‹å°±å®£å‘Šå¥½çš„ã€‚ä¸éç¼ºé»æ˜¯å¯èƒ½æµªè²»è¨˜æ†¶é«”ç©ºé–“ã€‚
æ–¼æ˜¯ï¼Œå°±æœ‰äº†dynamic arrays

```
int iSize = 0;
cin >> iSize;
typedef double* DoublePtr;
DoublePtr d;
//å‰µè¨­dynamic arrays
d = new double[iSize];
...
//æ­¸é‚„ç©ºé–“
delete []d;
//è¡¨ç¤ºæ²’æœ‰æŒ‡åˆ°ä»»ä½•çœŸå¯¦ç©ºé–“
d = NULL;
```



## ğŸ¤” ç–‘å•
Q1.pythonæ˜¯Call by Value,é‚„æ˜¯ Call by Reference?
A1:Python æ˜¯Pass by Assignmentã€‚
å¼•æ•¸å‚³çš„æ˜¯ç‰©ä»¶çš„åƒç…§(Call by Object Reference)ï¼Œä½†æ­¤è™•çš„Reference æ˜¯ç”± Pass by Value çš„æ–¹å¼å¯¦ä½œã€‚
â€»åƒè€ƒæ–‡ç« : 
[Python æ˜¯ Pass By Value, Pass by Reference, é‚„æ˜¯ Pass by Sharingï¼Ÿ](https://medium.com/starbugs/python-%E4%B8%80%E6%AC%A1%E6%90%9E%E6%87%82-pass-by-value-pass-by-reference-%E8%88%87-pass-by-sharing-1873a2c6ac46)
[Pythonå®˜æ–¹æ–‡ä»¶](https://docs.python.org/3/faq/programming.html#how-do-i-write-a-function-with-output-parameters-call-by-reference)



## ğŸ“– ä¸‹ä¸€ç« ç¯€ä¸»é¡Œé å‘Š
æ€éº¼å®šç¾©é¡åˆ¥

